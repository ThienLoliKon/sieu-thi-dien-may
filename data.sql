USE dien_may;
GO

EXEC sp_msforeachtable "ALTER TABLE ? NOCHECK CONSTRAINT all"
DELETE FROM bao_hanh;
DELETE FROM phieu_xuat_kho;
DELETE FROM phieu_nhap_kho;
DELETE FROM thuong;
DELETE FROM vi_pham;
DELETE FROM luong;
DELETE FROM diem_danh;
DELETE FROM san_pham_trong_chi_nhanh;
DELETE FROM san_pham_trong_kho_tong;
DELETE FROM chi_tiet_hoa_don;
DELETE FROM hoa_don;
DELETE FROM khuyen_mai;
DELETE FROM khach_hang;
DELETE FROM tai_khoan;
DELETE FROM nhan_vien;
DELETE FROM chi_nhanh;
DELETE FROM kho_tong;
DELETE FROM khu_vuc;
DELETE FROM san_pham_loai_hang;
DELETE FROM san_pham;
DELETE FROM loai_hang;
DELETE FROM nha_san_xuat;
DELETE FROM nha_cung_cap;
DELETE FROM xep_hang;
DELETE FROM cap_bac_nhan_vien;
DELETE FROM loai_vi_pham;
DELETE FROM loai_thuong;
EXEC sp_msforeachtable "ALTER TABLE ? WITH CHECK CHECK CONSTRAINT all"
GO

---------------------------------------------------------------------------
-- 2. DỮ LIỆU CỐ ĐỊNH (KHÔNG SỬA THEO YÊU CẦU)
---------------------------------------------------------------------------
-- Bảng: cap_bac_nhan_vien (20)
INSERT INTO cap_bac_nhan_vien (ma_cap_bac, ten_cap_bac, mo_ta_cap_bac) VALUES
('CB10000001', N'Nhân viên', N'Nhân viên bán hàng, kho'),
('CB10000002', N'Quản lý chi nhánh', N'Trưởng nhóm kinh doanh'),
('CB10000003', N'Quản lý khu vực', N'Quản lý chi nhánh'),
('CB10000004', N'Bộ phận sản phẩm', N'Giám đốc khu vực'),
('CB10000005', N'Giám đốc', N'Nhân viên phòng kế toán');

-- Bảng: khu_vuc (20) (nhan_vien_quan_ly = NULL)
INSERT INTO khu_vuc (ma_khu_vuc, ten_khu_vuc, nhan_vien_quan_ly) VALUES
('KV10000001', N'Miền Bắc', NULL),
('KV10000002', N'Miền Trung', NULL),
('KV10000003', N'Miền Nam', NULL),
('KV10000004', N'Tây Nguyên', NULL),
('KV10000005', N'Đồng bằng SCL', NULL),
('KV10000006', N'Đông Bắc Bộ', NULL),
('KV10000007', N'Tây Bắc Bộ', NULL),
('KV10000008', N'Bắc Trung Bộ', NULL),
('KV10000009', N'Nam Trung Bộ', NULL);

---------------------------------------------------------------------------
-- 3. DANH MỤC KHÁC (MÃ 2 CHỮ + 8 SỐ)
---------------------------------------------------------------------------

-- Nhà Cung Cấp (NC...)
INSERT INTO nha_cung_cap VALUES 
('NCC1000001', N'Sony VN', N'Q1 HCM'), 
('NCC1000002', N'Samsung Vina', N'Q9 HCM'), 
('NCC1000003', N'LG Electronics', N'Hà Nội'), 
('NCC1000004', N'Panasonic VN', N'HCM'), 
('NCC1000005', N'Daikin Vietnam', N'Hà Nội'), 
('NCC1000006', N'Apple FPT', N'Q3 HCM');

-- Nhà Sản Xuất (NS...)
INSERT INTO nha_san_xuat VALUES 
('NSX1000001', N'Sony', N'Nhật Bản'), 
('NSX1000002', N'Samsung', N'Hàn Quốc'), 
('NSX1000003', N'LG', N'Hàn Quốc'), 
('NSX1000004', N'Panasonic', N'Nhật Bản'), 
('NSX1000005', N'Daikin', N'Nhật Bản'), 
('NSX1000006', N'Apple', N'Mỹ');

-- Loại Hàng (LH...)
INSERT INTO loai_hang VALUES 
('LH10000001', N'Tivi', N'Nghe nhìn'), 
('LH10000002', N'Tủ lạnh', N'Điện lạnh'), 
('LH10000003', N'Máy giặt', N'Điện lạnh'), 
('LH10000004', N'Máy lạnh', N'Điện lạnh'), 
('LH10000005', N'Gia dụng', N'Nồi cơm, quạt'), 
('LH10000006', N'Laptop', N'Công nghệ');

-- Xếp Hạng (XH...) - Ưu đãi 0-100
INSERT INTO xep_hang VALUES 
('XH10000001', N'Thành viên', 0, 0),      
('XH10000002', N'Bạc', 10000000, 2),       
('XH10000003', N'Vàng', 50000000, 5),      
('XH10000004', N'Kim Cương', 200000000, 10); 

-- Chi Nhánh (CN...) - Gắn với Khu vực đã có
INSERT INTO chi_nhanh VALUES 
('CN10000001', N'CN Hà Nội', N'Cầu Giấy', 'KV10000001'), 
('CN10000002', N'CN Hải Phòng', N'Lê Chân', 'KV10000006'),
('CN10000003', N'CN Đà Nẵng', N'Hải Châu', 'KV10000002'),
('CN10000004', N'CN Quận 1', N'Q1 HCM', 'KV10000003'), 
('CN10000005', N'CN Thủ Đức', N'Thủ Đức', 'KV10000003'), 
('CN10000006', N'CN Cần Thơ', N'Ninh Kiều', 'KV10000005');

-- Kho Tổng (KT...)
INSERT INTO kho_tong VALUES 
('KT10000001', NULL, N'Kho Miền Bắc', N'HN', 5000),
('KT10000003', NULL, N'Kho Cà Mau', N'HN', 5000),
('KT10000004', NULL, N'Kho HCM', N'HN', 5000),
('KT10000005', NULL, N'Kho Vĩnh Long', N'HN', 5000),
('KT10000006', NULL, N'Kho Hải Phòng', N'HN', 5000),
('KT10000007', NULL, N'Kho Thanh Hóa', N'HN', 5000),
('KT10000008', NULL, N'Kho Huế', N'HN', 5000),
('KT10000009', NULL, N'Kho Bắc Ninh', N'HN', 5000),
('KT10000010', NULL, N'Kho Nha Trang', N'HN', 5000),
('KT10000002', NULL, N'Kho Miền Nam', N'BD', 8000);

-- Vi Phạm & Thưởng (VP..., TH...)
go 
INSERT INTO loai_vi_pham VALUES 
('LV00000001', N'Đi muộn', 1, 50000),
('LV00000002', N'Về sớm', 1, 50000),
('LV00000003', N'Nghỉ không phép', 3, 500000),
('LV00000004', N'Làm hỏng hàng', 2, 200000),
('LV00000005', N'Mất trật tự', 1, 100000),
('LV00000006', N'Ngủ trong giờ làm', 1, 50000),
('LV00000007', N'Không hoàn thành công việc', 2, 150000),
('LV00000008', N'Vi phạm nội quy công ty', 2, 100000),
('LV00000009', N'Tự ý nghỉ việc', 3, 600000),
('LV00000010', N'Không báo cáo công việc', 2, 100000);

go
INSERT INTO loai_thuong VALUES 
('LT00000001', N'Chuyên cần', 26, 500000),
('LT00000002', N'Doanh số', 100, 2000000),
('LT00000003', N'Xuất sắc', 1, 1000000),
('LT00000004', N'Lễ tết', 0, 1000000),
('LT00000005', N'Thâm niên', 5, 3000000),
('LT00000006', N'Hoàn thành xuất sắc', 1, 1000000),
('LT00000007', N'Khách hàng hài lòng', 0, 800000),
('LT00000008', N'Chất lượng công việc', 0, 300000),
('LT00000009', N'Tính kỷ luật', 0, 100000),
('LT00000010', N'Khả năng sáng tạo', 0, 200000);

go
INSERT INTO nhan_vien VALUES 
('NV10000001', N'Nguyễn Quốc Hưng', 'CB10000005', '0901000001', N'HCM', 'CN10000004', 1), -- Giám đốc
('NV10000002', N'Trần Thị Thu Hà', 'CB10000004', '0902000002', N'HN', 'CN10000001', 1),  -- QL Sản phẩm (Bắc)
('NV10000003', N'Lê Văn Tùng', 'CB10000003', '0903000003', N'HCM', 'CN10000004', 1),  -- QL Khu vực Nam
('NV10000004', N'Phạm Minh Tuấn', 'CB10000002', '0904000004', N'HN', 'CN10000001', 1),  -- QL Chi nhánh HN
('NV10000005', N'Hoàng Thị Lan', 'CB10000002', '0905000005', N'ĐN', 'CN10000003', 1),  -- QL Chi nhánh ĐN
('NV10000006', N'Võ Văn Kiệt', 'CB10000002', '0906000006', N'HCM', 'CN10000004', 1),  -- QL Chi nhánh Q1
('NV10000007', N'Bùi Thị Hoa', 'CB10000001', '0907000007', N'HN', 'CN10000001', 1),   -- NV
('NV10000008', N'Đỗ Văn Nam', 'CB10000001', '0908000008', N'HP', 'CN10000002', 1),
('NV10000009', N'Ngô Thị Tuyết', 'CB10000001', '0909000009', N'ĐN', 'CN10000003', 1),
('NV10000010', N'Lý Văn Hùng', 'CB10000001', '0910000010', N'HCM', 'CN10000004', 1),
('NV10000011', N'Trương Thị Mỹ', 'CB10000001', '0911000011', N'HCM', 'CN10000004', 1),
('NV10000012', N'Đinh Văn Dũng', 'CB10000001', '0912000012', N'HCM', 'CN10000005', 1),
('NV10000013', N'Lâm Thị Bé', 'CB10000001', '0913000013', N'CT', 'CN10000006', 1),
('NV10000014', N'Phan Văn Khải', 'CB10000001', '0914000014', N'HN', 'CN10000001', 1), -- NV Kho
('NV10000015', N'Cao Thị Hồng', 'CB10000001', '0915000015', N'BD', 'CN10000004', 1);
go
INSERT INTO tai_khoan VALUES ('NV10000001', 'admin123', 'Admin');
INSERT INTO tai_khoan VALUES ('NV10000002', '123456', 'QuanLy');
INSERT INTO tai_khoan VALUES ('NV10000003', '123456', 'QuanLy');
INSERT INTO tai_khoan VALUES ('NV10000004', '123', 'NhanVien');
INSERT INTO tai_khoan VALUES ('NV10000006', '123', 'NhanVien');
go 
INSERT INTO diem_danh VALUES ('DD00000001', 'NV10000001', '2025-11-01 08:00:00', '2025-11-01 17:00:00');
INSERT INTO diem_danh VALUES ('DD00000002', 'NV10000002', '2025-11-01 08:10:00', '2025-11-01 17:00:00'); -- Trễ
INSERT INTO diem_danh VALUES ('DD00000003', 'NV10000003', '2025-11-01 07:55:00', '2025-11-01 17:10:00');
INSERT INTO diem_danh VALUES ('DD00000004', 'NV10000004', '2025-11-01 08:00:00', '2025-11-01 16:30:00'); -- Về sớm
INSERT INTO diem_danh VALUES ('DD00000005', 'NV10000006', '2025-11-01 08:00:00', '2025-11-01 17:00:00');
INSERT INTO diem_danh VALUES ('DD00000006', 'NV10000001', '2025-11-02 08:00:00', '2025-11-02 17:00:00');
INSERT INTO diem_danh VALUES ('DD00000007', 'NV10000002', '2025-11-02 08:00:00', '2025-11-02 17:00:00');
INSERT INTO diem_danh VALUES ('DD00000008', 'NV10000003', '2025-11-02 08:00:00', '2025-11-02 17:00:00');
INSERT INTO diem_danh VALUES ('DD00000009', 'NV10000004', '2025-11-02 08:30:00', '2025-11-02 17:00:00'); -- Trễ
INSERT INTO diem_danh VALUES ('DD00000010', 'NV10000006', '2025-11-02 08:00:00', '2025-11-02 17:00:00');
go


INSERT INTO vi_pham VALUES ('VP00000001', 'NV10000002', 'LV00000001', '2025-11-01 08:10:00', 1);
INSERT INTO vi_pham VALUES ('VP00000002', 'NV10000004', 'LV00000002', '2025-11-01 16:30:00', 1);
INSERT INTO vi_pham VALUES ('VP00000003', 'NV10000004', 'LV00000001', '2025-11-02 08:30:00', 1);
INSERT INTO vi_pham VALUES ('VP00000004', 'NV10000005', 'LV00000003', '2025-10-15 00:00:00', 1); -- Nghỉ việc
INSERT INTO vi_pham VALUES ('VP00000005', 'NV10000006', 'LV00000004', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000006', 'NV10000006', 'LV00000005', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000007', 'NV10000007', 'LV00000006', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000008', 'NV10000008', 'LV00000007', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000009', 'NV10000009', 'LV00000008', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000010', 'NV10000010', 'LV00000009', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000011', 'NV10000001', 'LV00000010', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000012', 'NV10000009', 'LV00000010', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000013', 'NV10000011', 'LV00000009', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000014', 'NV10000015', 'LV00000008', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000015', 'NV10000014', 'LV00000007', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000016', 'NV10000008', 'LV00000003', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000017', 'NV10000013', 'LV00000004', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000018', 'NV10000002', 'LV00000008', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000019', 'NV10000011', 'LV00000009', '2025-11-05 10:00:00', 0);
INSERT INTO vi_pham VALUES ('VP00000020', 'NV10000013', 'LV00000010', '2025-11-05 10:00:00', 0);
go


-- Thưởng
INSERT INTO thuong VALUES ('T000000001', 'NV10000001', 'LT00000002', 1, '2025-11-30 00:00:00');
INSERT INTO thuong VALUES ('T000000002', 'NV10000003', 'LT00000001', 1, '2025-11-30 00:00:00');
INSERT INTO thuong VALUES ('T000000003', 'NV10000006', 'LT00000003', 1, '2025-11-15 00:00:00');
INSERT INTO thuong VALUES ('T000000004', 'NV10000001', 'LT00000005', 1, '2025-01-01 00:00:00');
INSERT INTO thuong VALUES ('T000000005', 'NV10000002', 'LT00000004', 1, '2025-01-01 00:00:00');
INSERT INTO thuong VALUES ('T000000006', 'NV10000002', 'LT00000004', 1, '2025-01-01 00:00:00');
INSERT INTO thuong VALUES ('T000000007', 'NV10000004', 'LT00000009', 1, '2025-01-01 00:00:00');
INSERT INTO thuong VALUES ('T000000008', 'NV10000015', 'LT00000005', 1, '2025-01-01 00:00:00');
INSERT INTO thuong VALUES ('T000000009', 'NV10000014', 'LT00000006', 1, '2025-01-01 00:00:00');
INSERT INTO thuong VALUES ('T000000010', 'NV10000010', 'LT00000006', 1, '2025-01-01 00:00:00');
INSERT INTO thuong VALUES ('T000000011', 'NV10000009', 'LT00000007', 1, '2025-01-01 00:00:00');
INSERT INTO thuong VALUES ('T000000012', 'NV10000008', 'LT00000008', 1, '2025-01-01 00:00:00');
INSERT INTO thuong VALUES ('T000000013', 'NV10000007', 'LT00000009', 1, '2025-01-01 00:00:00');
INSERT INTO thuong VALUES ('T000000014', 'NV10000012', 'LT00000010', 1, '2025-01-01 00:00:00');
go
-- Lương (Tháng 10)
INSERT INTO luong VALUES ('L000000001', 'NV10000001', 30000000, 1.5, '2025-10-01', 5000000, 0);
INSERT INTO luong VALUES ('L000000002', 'NV10000002', 15000000, 1.2, '2025-10-01', 1000000, 50000);
INSERT INTO luong VALUES ('L000000003', 'NV10000003', 15000000, 1.2, '2025-10-01', 500000, 0);
INSERT INTO luong VALUES ('L000000004', 'NV10000004', 8000000, 1.0, '2025-10-01', 0, 100000);
INSERT INTO luong VALUES ('L000000005', 'NV10000006', 8000000, 1.0, '2025-10-01', 200000, 0);
---------------------------------------------------------------------------
-- 4. SẢN PHẨM (SP...) - 20 Món
---------------------------------------------------------------------------
INSERT INTO san_pham VALUES
('SP10000001', N'Tivi Sony 4K 55 inch', 'NSX1000001', 'NCC1000001', 15, 24, 15000000, '2023-01-01'),
('SP10000002', N'Tivi Samsung QLED 65"', 'NSX1000002', 'NCC1000002', 20, 36, 25000000, '2023-02-01'),
('SP10000003', N'Tủ lạnh LG Inverter', 'NSX1000003', 'NCC1000003', 60, 24, 8000000, '2023-03-01'),
('SP10000004', N'Tủ lạnh Pana 2 cánh', 'NSX1000004', 'NCC1000004', 55, 24, 7500000, '2023-03-15'),
('SP10000005', N'Máy giặt LG Ngang', 'NSX1000003', 'NCC1000003', 50, 24, 9000000, '2023-04-01'),
('SP10000006', N'Máy giặt Samsung Top', 'NSX1000002', 'NCC1000002', 45, 24, 6000000, '2023-04-10'),
('SP10000007', N'Máy lạnh Daikin 1HP', 'NSX1000005', 'NCC1000005', 30, 12, 10000000, '2023-05-01'),
('SP10000008', N'Máy lạnh Pana 1.5HP', 'NSX1000004', 'NCC1000004', 35, 12, 13000000, '2023-05-05'),
('SP10000009', N'Nồi cơm Sharp', 'NSX1000004', 'NCC1000003', 3, 12, 1500000, '2023-06-01'),
('SP10000010', N'Lò vi sóng Samsung', 'NSX1000002', 'NCC1000002', 10, 12, 3000000, '2023-06-15'),
('SP10000011', N'Macbook Air M1', 'NSX1000006', 'NCC1000006', 1.2, 12, 18000000, '2022-12-01'),
('SP10000012', N'Macbook Pro M2', 'NSX1000006', 'NCC1000006', 1.5, 12, 30000000, '2023-01-20'),
('SP10000013', N'Quạt Senko', 'NSX1000004', 'NCC1000004', 5, 12, 500000, '2023-07-01'),
('SP10000014', N'Bàn ủi Philips', 'NSX1000004', 'NCC1000003', 2, 12, 1200000, '2023-07-10'),
('SP10000015', N'Máy xay Sunhouse', 'NSX1000002', 'NCC1000002', 3, 12, 800000, '2023-08-01'),
('SP10000016', N'Tivi LG OLED 55"', 'NSX1000003', 'NCC1000003', 16, 24, 14000000, '2023-02-10'),
('SP10000017', N'Máy lạnh LG Dual', 'NSX1000003', 'NCC1000003', 32, 24, 10500000, '2023-05-20'),
('SP10000018', N'Tủ lạnh SideBySide', 'NSX1000002', 'NCC1000002', 100, 24, 30000000, '2023-03-20'),
('SP10000019', N'Robot hút bụi Xiaomi', 'NSX1000002', 'NCC1000002', 4, 12, 6500000, '2023-09-01'),
('SP10000020', N'Máy lọc không khí', 'NSX1000004', 'NCC1000004', 6, 12, 4000000, '2023-09-15');

-- Liên kết Sản phẩm - Loại hàng
INSERT INTO san_pham_loai_hang VALUES 
('SP10000001','LH10000001'),('SP10000002','LH10000001'),('SP10000003','LH10000002'),('SP10000004','LH10000002'),
('SP10000005','LH10000003'),('SP10000006','LH10000003'),('SP10000007','LH10000004'),('SP10000008','LH10000004'),
('SP10000009','LH10000005'),('SP10000010','LH10000005'),('SP10000011','LH10000006'),('SP10000012','LH10000006'),
('SP10000013','LH10000005'),('SP10000014','LH10000005'),('SP10000015','LH10000005'),('SP10000016','LH10000001'),
('SP10000017','LH10000004'),('SP10000018','LH10000002'),('SP10000019','LH10000005'),('SP10000020','LH10000005');

---------------------------------------------------------------------------
-- 5. NHÂN SỰ & KHÁCH HÀNG (NV..., KH...)
---------------------------------------------------------------------------


-- Cập nhật quản lý kho/khu vực
UPDATE kho_tong SET nhan_vien_quan_ly = 'NV10000002' WHERE ma_kho = 'KT10000001';
UPDATE kho_tong SET nhan_vien_quan_ly = 'NV10000003' WHERE ma_kho = 'KT10000002';
UPDATE khu_vuc SET nhan_vien_quan_ly = 'NV10000003' WHERE ma_khu_vuc = 'KV10000003';


INSERT INTO khach_hang VALUES 
('KH10000001', N'Nguyễn Thị Mai', '000', N'N/A', 'XH10000001', 0),
('KH10000002', N'Trần Văn Long', '0991', N'Q2', 'XH10000004', 500000000), -- Kim Cương
('KH10000003', N'Lê Thị Thanh', '0992', N'Q7', 'XH10000003', 80000000),  -- Vàng
('KH10000004', N'Phạm Văn Đức', '0993', N'HN', 'XH10000002', 15000000),  -- Bạc
('KH10000005', N'Hoàng Thị Yến', '0994', N'ĐN', 'XH10000001', 2000000),
('KH10000006', N'Võ Văn Bình', '0995', N'CT', 'XH10000001', 0),
('KH10000007', N'Đặng Thị Ngọc', '0996', N'HP', 'XH10000003', 60000000),
('KH10000008', N'Bùi Văn Tám', '0997', N'HN', 'XH10000001', 100000),
('KH10000009', N'Ngô Thị Hạnh', '0998', N'HCM', 'XH10000002', 12000000),
('KH10000010', N'Mai Văn Sáu', '0999', N'CT', 'XH10000001', 500000);

---------------------------------------------------------------------------
-- 6. KHO HÀNG (ĐẦY ĐỦ ĐỂ BÁN)
---------------------------------------------------------------------------
-- Kho Tổng
INSERT INTO san_pham_trong_kho_tong VALUES 
('KT10000001', 'SP10000001', 100), ('KT10000001', 'SP10000002', 100), ('KT10000001', 'SP10000003', 300),
('KT10000001', 'SP10000004', 100), ('KT10000001', 'SP10000005', 100), ('KT10000001', 'SP10000006', 300),
('KT10000001', 'SP10000007', 100), ('KT10000001', 'SP10000008', 100), ('KT10000001', 'SP10000009', 300),
('KT10000002', 'SP10000001', 200), ('KT10000002', 'SP10000004', 100), ('KT10000002', 'SP10000011', 50);

-- Kho Chi Nhánh (Mỗi CN đều có hàng)
-- Hà Nội
INSERT INTO san_pham_trong_chi_nhanh VALUES ('CN10000001', 'SP10000001', 20), ('CN10000001', 'SP10000007', 50), ('CN10000001', 'SP10000009', 30);
-- Hải Phòng
INSERT INTO san_pham_trong_chi_nhanh VALUES ('CN10000002', 'SP10000001', 10), ('CN10000002', 'SP10000013', 50);
-- Đà Nẵng
INSERT INTO san_pham_trong_chi_nhanh VALUES ('CN10000003', 'SP10000001', 15), ('CN10000003', 'SP10000011', 5);
-- Quận 1 (Nhiều hàng)
INSERT INTO san_pham_trong_chi_nhanh VALUES ('CN10000004', 'SP10000001', 50), ('CN10000004', 'SP10000002', 30), ('CN10000004', 'SP10000003', 30), ('CN10000004', 'SP10000004', 30), ('CN10000004', 'SP10000005', 30), ('CN10000004', 'SP10000006', 30), ('CN10000004', 'SP10000007', 30), ('CN10000004', 'SP10000008', 30), ('CN10000004', 'SP10000009', 30), ('CN10000004', 'SP10000010', 30), ('CN10000004', 'SP10000011', 20), ('CN10000004', 'SP10000012', 15);
-- Thủ Đức
INSERT INTO san_pham_trong_chi_nhanh VALUES ('CN10000005', 'SP10000001', 10), ('CN10000005', 'SP10000013', 100);
-- Cần Thơ
INSERT INTO san_pham_trong_chi_nhanh VALUES ('CN10000006', 'SP10000003', 15), ('CN10000006', 'SP10000007', 30);


---------------------------------------------------------------------------
-- 7. GIAO DỊCH (KM..., HD...)
---------------------------------------------------------------------------
INSERT INTO khuyen_mai VALUES 
('KM10000001', 10, 'LH10000001', '2023-01-01', '2025-12-31'), -- 10% Tivi
('KM10000002', 20, 'LH10000004', '2023-06-01', '2023-09-30'), -- 20% Mùa hè
('KM10000003', 5,  'LH10000006', '2023-01-01', '2025-12-31'); -- 5% Laptop


-- HD01: Khách Kim Cương (10%) mua Tivi (KM 10%)
-- Giá Gốc 15tr. Giảm KH 10% (1.5tr). Giảm KM 10% (1.35tr). Còn 12.15tr.
INSERT INTO hoa_don VALUES ('HD10000001', 'NV10000010', 'KH10000002', '2023-11-01');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000001', 'SP10000001', 'KM10000001', 1, 12150000, 15000000, '2023-11-01');

-- HD02: Khách Bạc (2%) mua Máy lạnh
INSERT INTO hoa_don VALUES ('HD10000002', 'NV10000007', 'KH10000004', '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000002', 'SP10000007', NULL, 2, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000002', 'SP10000001', NULL, 3, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000002', 'SP10000002', NULL, 7, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000002', 'SP10000003', NULL, 6, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000002', 'SP10000004', NULL, 1, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000002', 'SP10000005', NULL, 9, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000002', 'SP10000006', NULL, 5, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000002', 'SP10000017', NULL, 6, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000002', 'SP10000008', NULL, 2, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000002', 'SP10000009', NULL, 12, 9800000, 10000000, '2023-11-02');

-- HD03: Khách Vãng Lai (0%) mua Tủ lạnh
INSERT INTO hoa_don VALUES ('HD10000003', 'NV10000013', 'KH10000001', '2023-11-03');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000003', 'SP10000003', NULL, 1, 8000000, 8000000, '2023-11-03');

-- HD04: Khách Vàng (5%) mua Laptop (KM 5%)
INSERT INTO hoa_don VALUES ('HD10000004', 'NV10000010', 'KH10000003', '2023-11-04');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000004', 'SP10000011', 'KM10000003', 1, 16245000, 18000000, '2023-11-04');

-- Thêm nhiều hóa đơn khác
INSERT INTO hoa_don VALUES ('HD10000005', 'NV10000008', 'KH10000007', '2023-11-05');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000005', 'SP10000001', 'KM10000001', 1, 13500000, 15000000, '2023-11-05');

INSERT INTO hoa_don VALUES ('HD10000006', 'NV10000012', 'KH10000001', '2023-11-06');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000006', 'SP10000009', NULL, 2, 1500000, 1500000, '2023-11-06');

INSERT INTO hoa_don VALUES ('HD10000007', 'NV10000010', 'KH10000002', '2023-11-07');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000007', 'SP10000002', 'KM10000001', 1, 20250000, 25000000, '2023-11-07');

INSERT INTO hoa_don VALUES ('HD10000008', 'NV10000011', 'KH10000001', '2023-11-08');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000008', 'SP10000013', NULL, 5, 500000, 500000, '2023-11-08');

INSERT INTO hoa_don VALUES ('HD10000009', 'NV10000007', 'KH10000008', '2023-11-09');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000009', 'SP10000007', NULL, 1, 10000000, 10000000, '2023-11-09');

INSERT INTO hoa_don VALUES ('HD10000010', 'NV10000009', 'KH10000005', '2023-11-10');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000010', 'SP10000008', NULL, 1, 13000000, 13000000, '2023-11-10');

INSERT INTO hoa_don VALUES ('HD10000011', 'NV10000010', 'KH10000002', '2023-11-11');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000011', 'SP10000012', 'KM10000003', 1, 25650000, 30000000, '2023-11-11');

INSERT INTO hoa_don VALUES ('HD10000012', 'NV10000013', 'KH10000010', '2023-11-12');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000012', 'SP10000006', NULL, 1, 6000000, 6000000, '2023-11-12');

INSERT INTO hoa_don VALUES ('HD10000013', 'NV10000007', 'KH10000001', '2023-11-13');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000013', 'SP10000001', 'KM10000001', 1, 13500000, 15000000, '2023-11-13');

INSERT INTO hoa_don VALUES ('HD10000014', 'NV10000008', 'KH10000007', '2023-11-14');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000014', 'SP10000013', NULL, 3, 500000, 500000, '2023-11-14');

INSERT INTO hoa_don VALUES ('HD10000015', 'NV10000009', 'KH10000005', '2023-11-15');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000015', 'SP10000004', NULL, 1, 7500000, 7500000, '2023-11-15');

INSERT INTO hoa_don VALUES ('HD10000016', 'NV10000010', 'KH10000002', '2023-11-16');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000016', 'SP10000019', NULL, 1, 5850000, 6500000, '2023-11-16');

INSERT INTO hoa_don VALUES ('HD10000017', 'NV10000011', 'KH10000009', '2023-11-17');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000017', 'SP10000007', NULL, 1, 9800000, 10000000, '2023-11-17');

INSERT INTO hoa_don VALUES ('HD10000018', 'NV10000012', 'KH10000001', '2023-11-18');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000018', 'SP10000005', NULL, 1, 9000000, 9000000, '2023-11-18');

INSERT INTO hoa_don VALUES ('HD10000019', 'NV10000007', 'KH10000004', '2023-11-19');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000019', 'SP10000010', NULL, 1, 2940000, 3000000, '2023-11-19');

INSERT INTO hoa_don VALUES ('HD10000020', 'NV10000010', 'KH10000003', '2023-11-20');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000020', 'SP10000016', 'KM10000001', 2, 11970000, 14000000, '2023-11-20');


INSERT INTO hoa_don VALUES ('HD10000021', 'NV10000011', 'KH10000002', '2024-11-20');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000021', 'SP10000011', NULL, 5, 31970000, 14000000, '2023-11-20');

INSERT INTO hoa_don VALUES ('HD10000022', 'NV10000011', 'KH10000002', '2025-11-20');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000020', 'SP10000012', NULL, 8, 11570000, 14000000, '2023-11-20');

INSERT INTO hoa_don VALUES ('HD10000023', 'NV10000011', 'KH10000002', '2023-11-20');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000020', 'SP10000013', NULL, 2, 19970000, 14000000, '2023-11-20');

INSERT INTO hoa_don VALUES ('HD10000024', 'NV10000001', 'KH10000004', '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000024', 'SP10000007', NULL, 2, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000024', 'SP10000001', NULL, 3, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000024', 'SP10000002', NULL, 7, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000024', 'SP10000003', NULL, 6, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000024', 'SP10000004', NULL, 1, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000024', 'SP10000005', NULL, 9, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000024', 'SP10000006', NULL, 5, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000024', 'SP10000010', NULL, 6, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000024', 'SP10000008', NULL, 2, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000024', 'SP10000009', NULL, 12, 9800000, 10000000, '2023-11-02');

INSERT INTO hoa_don VALUES ('HD10000025', 'NV10000002', 'KH10000005', '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000025', 'SP10000007', NULL, 2, 19800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000025', 'SP10000001', NULL, 3, 141214, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000025', 'SP10000002', NULL, 7, 21312213, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000025', 'SP10000015', NULL, 6, 3432253, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000025', 'SP10000014', NULL, 1, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000025', 'SP10000005', NULL, 9, 980000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000025', 'SP10000006', NULL, 5, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000025', 'SP10000017', NULL, 6, 1241241, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000025', 'SP10000008', NULL, 2, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000025', 'SP10000019', NULL, 12, 5741573, 10000000, '2023-11-02');

INSERT INTO hoa_don VALUES ('HD10000026', 'NV10000003', 'KH10000005', '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000026', 'SP10000007', NULL, 2, 19800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000026', 'SP10000001', NULL, 3, 214142, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000026', 'SP10000012', NULL, 8, 457454, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000026', 'SP10000015', NULL, 6, 1341352, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000026', 'SP10000004', NULL, 1, 12413564, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000026', 'SP10000005', NULL, 2, 980000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000026', 'SP10000006', NULL, 3, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000026', 'SP10000017', NULL, 2, 623623, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000026', 'SP10000018', NULL, 2, 415742, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000026', 'SP10000009', NULL, 12, 9800000, 10000000, '2023-11-02');

INSERT INTO hoa_don VALUES ('HD10000027', 'NV10000004', 'KH10000005', '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000027', 'SP10000007', NULL, 2, 19800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000027', 'SP10000011', NULL, 3, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000027', 'SP10000002', NULL, 8, 875147, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000027', 'SP10000013', NULL, 6, 137363, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000027', 'SP10000014', NULL, 1, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000027', 'SP10000005', NULL, 2, 980000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000027', 'SP10000006', NULL, 5, 513515, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000027', 'SP10000017', NULL, 8, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000027', 'SP10000008', NULL, 2, 5135115, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000027', 'SP10000019', NULL, 12, 6538574, 10000000, '2023-11-02');

INSERT INTO hoa_don VALUES ('HD10000028', 'NV10000005', 'KH10000005', '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000028', 'SP10000017', NULL, 2, 19800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000028', 'SP10000011', NULL, 3, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000028', 'SP10000012', NULL, 7, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000028', 'SP10000003', NULL, 6, 9800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000028', 'SP10000014', NULL, 1, 4800000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000028', 'SP10000015', NULL, 5, 980000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000028', 'SP10000006', NULL, 5, 9800300, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000028', 'SP10000007', NULL, 2, 9400000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000028', 'SP10000018', NULL, 6, 9803000, 10000000, '2023-11-02');
INSERT INTO chi_tiet_hoa_don VALUES ('HD10000028', 'SP10000019', NULL, 3, 9800400, 10000000, '2023-11-02');

---------------------------------------------------------------------------
-- 1. DỮ LIỆU BẢNG BẢO HÀNH (bao_hanh)
---------------------------------------------------------------------------
-- Logic: Lấy các khách hàng đã mua hàng trong bảng hoa_don để tạo bảo hành
-- NV10000014 (Phan Văn Khải - Kho/Kỹ thuật) sẽ là người nhận bảo hành

INSERT INTO bao_hanh (ma_bao_hanh, ma_san_pham, ma_khach_hang, nhan_vien_bao_hanh, ly_do, ngay_gui, ngay_xong, hoan_thanh) VALUES
('BH10000001', 'SP10000001', 'KH10000002', 'NV10000014', N'Màn hình bị sọc ngang', '2023-12-01 09:00:00', '2023-12-05 10:00:00', 1), -- Đã xong
('BH10000002', 'SP10000007', 'KH10000004', 'NV10000014', N'Máy lạnh không lạnh', '2023-11-25 14:00:00', '2023-11-27 16:00:00', 1), -- Đã xong
('BH10000003', 'SP10000011', 'KH10000003', 'NV10000014', N'Bàn phím bị liệt phím A', '2023-11-20 08:30:00', NULL, 0), -- Đang sửa
('BH10000004', 'SP10000003', 'KH10000001', 'NV10000014', N'Tủ lạnh kêu to', '2023-11-28 10:00:00', NULL, 0), -- Đang sửa
('BH10000005', 'SP10000019', 'KH10000002', 'NV10000014', N'Robot không tự về dock sạc', '2023-11-18 11:00:00', '2023-11-19 09:00:00', 1);
GO

---------------------------------------------------------------------------
-- 2. DỮ LIỆU PHIẾU NHẬP KHO (phieu_nhap_kho)
---------------------------------------------------------------------------
-- Logic: Nhập hàng từ Nhà cung cấp vào Kho Tổng
-- Giá nhập thường thấp hơn giá bán khoảng 20-30%

INSERT INTO phieu_nhap_kho (ma_phieu_nhap, ma_kho, ma_san_pham, ma_nhan_vien_kiem_tra, so_luong, don_gia) VALUES
-- Nhập kho Miền Bắc (KT10000001)
('PN10000001', 'KT10000001', 'SP10000001', 'NV10000014', 50, 12000000), -- Tivi Sony
('PN10000002', 'KT10000001', 'SP10000007', 'NV10000014', 100, 8000000),  -- Máy lạnh Daikin
('PN10000003', 'KT10000001', 'SP10000013', 'NV10000014', 200, 350000),   -- Quạt Senko

-- Nhập kho Miền Nam (KT10000002)
('PN10000004', 'KT10000002', 'SP10000002', 'NV10000014', 40, 20000000),  -- Tivi Samsung
('PN10000005', 'KT10000002', 'SP10000004', 'NV10000014', 60, 6000000),   -- Tủ lạnh Pana
('PN10000006', 'KT10000002', 'SP10000011', 'NV10000014', 30, 15000000);  -- Macbook Air M1
GO

---------------------------------------------------------------------------
-- 3. DỮ LIỆU PHIẾU XUẤT KHO (phieu_xuat_kho)
---------------------------------------------------------------------------
-- Logic: Xuất từ Kho Tổng về các Chi Nhánh

INSERT INTO phieu_xuat_kho (ma_phieu_xuat, ma_kho, ma_san_pham, ma_chi_nhanh_nhap, ma_nhan_vien_kiem_tra, so_luong) VALUES
-- Xuất từ kho Bắc về CN Hà Nội (CN10000001)
('PX10000001', 'KT10000001', 'SP10000001', 'CN10000001', 'NV10000014', 10),
('PX10000002', 'KT10000001', 'SP10000007', 'CN10000001', 'NV10000014', 20),

-- Xuất từ kho Bắc về CN Hải Phòng (CN10000002)
('PX10000003', 'KT10000001', 'SP10000013', 'CN10000002', 'NV10000014', 50),

-- Xuất từ kho Nam về CN Quận 1 (CN10000004)
('PX10000004', 'KT10000002', 'SP10000002', 'CN10000004', 'NV10000014', 15),
('PX10000005', 'KT10000002', 'SP10000011', 'CN10000004', 'NV10000014', 10),

-- Xuất từ kho Nam về CN Cần Thơ (CN10000006)
('PX10000006', 'KT10000002', 'SP10000004', 'CN10000006', 'NV10000014', 10);
GO

---------------------------------------------------------------------------
-- 4. DỮ LIỆU NGHỈ VIỆC (nghi_viec)
---------------------------------------------------------------------------
-- Logic: Trong bảng vi_pham có nhân viên NV10000005 bị lỗi "Nghỉ không phép" nặng
-- Ta cho nhân viên này nghỉ việc.


-- Cập nhật trạng thái nhân viên này trong bảng nhan_vien thành 0 (đã nghỉ) nếu cần
UPDATE nhan_vien SET trang_thai = 0 WHERE ma_nhan_vien = 'NV10000005';
GO
